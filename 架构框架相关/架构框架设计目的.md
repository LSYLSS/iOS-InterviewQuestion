### 架构框架相关

#### 架构框架相关目的
* 模块化
* 分层
* 解耦
* 降低代码重合度



#### 设计图片缓存框架

![](./img/Snip20190310_106.png)

#### 图片读写

* 以图片URL的单向Hash值作为key

**多级缓存设计:**
![](./img/Snip20190310_107.png)

#### 内存设计的问题
* 存储的size
* 淘汰策略


#####  存储的size
![](./img/Snip20190310_110.png)
##### 淘汰策略

![](./img/Snip20190310_111.png)


![](./img/Snip20190310_112.png)


#### 磁盘设计
* 存储方式
* 大小限制
* 淘汰策略

#### 网络设计
* 图片请求最大并发量
* 请求超时策略
* 请求的优先级

#### 图片解码

![](./img/Snip20190310_113.png)


#### 线程处理
![](./img/Snip20190310_114.png)

 